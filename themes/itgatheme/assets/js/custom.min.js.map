{"version":3,"sources":["itga.js","mon-compte.js","premiere-connexion.js","signin.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACn+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom.min.js","sourcesContent":["//Affichage du menu mobile\nfunction redimensionnement() {\n  var mainMenu = jQuery( \"#block-itgatheme-main-menu\" );\n  var topMenu = jQuery( \"#block-menutop-2\" );\n\n  if ((mainMenu.length == 1) && (topMenu.length == 1)) {\n    if(\"matchMedia\" in window) { // Détection\n        if (matchMedia('only screen and (max-width:1320px)').matches) {\n          //Déplacement vers le menu mobile\n          jQuery(mainMenu).appendTo('.main-menus');\n          jQuery(topMenu).appendTo('.main-menus');\n\n        } else {\n\n          //Déplacement vers leurs zones de départ\n          jQuery(mainMenu).appendTo('#leftContent > div');\n          jQuery(topMenu).appendTo('header > .wrap > div');\n        }\n    }\n  } else {\n    //On l'enlève sur la partie connexion\n    jQuery('.cd-nav-trigger').remove();\n  }\n}\n\n\n\n// On lie les événements resize/load à la fonction\n    window.addEventListener('load', redimensionnement, false);\n    window.addEventListener('resize', redimensionnement, false);\n\n\n\njQuery(function ($) {\n\n    $(document).ready(function () {\n\n        //Checkbox et radio button sur les webforms - on déplace le texte dans les spans pour mettre les css\n        $('.js-form-type-checkbox label.option span').each(function () {\n          console.log(\"toto\");\n          $(this).contents().appendTo($(this).parent());\n        });\n\n        $('.js-form-type-webform-radios-other label.option span').each(function () {\n          console.log(\"toto\");\n          $(this).contents().appendTo($(this).parent());\n        });\n\n        //Menu mobile\n        var isLateralNavAnimating = false;\n\n        //open/close lateral navigation\n        jQuery('.cd-nav-trigger').on('click', function (event) {\n            event.preventDefault();\n            //stop if nav animation is running\n            if (!isLateralNavAnimating) {\n                if (jQuery(this).parents('.csstransitions').length > 0) isLateralNavAnimating = true;\n\n                jQuery('body').toggleClass('navigation-is-open');\n                jQuery('.cd-navigation-wrapper').one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function () {\n                    //animation is over\n                    isLateralNavAnimating = false;\n                });\n            }\n        });\n\n        // ajout d'une class au passage\n        var $window = $(window);\n        $window.on('load scroll', check_if_in_view);\n        $window.trigger('scroll');\n\n        //slick slider\n        $('.slider').slick({\n            infinite: true,\n            speed: 700,\n            autoplay: true,\n            autoplaySpeed: 4000,\n            fade: true,\n            arrows: true,\n            slidesToShow: 1,\n            slidesToScroll: 1\n        });\n\n        //accordeon\n        $('body:not(.path-mon-compte-mon-agence-itga, .page-node-type-agence).accordion-content').hide();\n        $('.accordion-single').click(function () {\n            $('.accordion .active').removeClass('active');\n            $(this).find('h3').toggleClass('rotated');\n            $(this).next('.accordion-content').addClass('active');\n            $('.accordion-content.active').slideToggle();\n        });\n\n        var inputs = $('form input').not('.form-checkbox').not('.form-radio').not('.form-number');\n        if (inputs.val().length === 0) {\n        } else {\n            inputs.parent().addClass(\"focused\");\n        }\n\n\n        // Gestion des placeholder au focus\n        $(document).on('blur', 'form input:not(.form-checkbox), form input:not(.form-radio), form input:not(.form-number), form textarea', function () {\n            if ($(this).val().length === 0) {\n                if ($(this).hasClass('form-textarea')) {\n                    $(this).parent().parent().removeClass(\"focused\");\n                }\n                else {\n                    $(this).parent().removeClass(\"focused\");\n                }\n\n            }\n        });\n\n        $(document).on('focus', 'form input:not(.form-checkbox), form input:not(.form-radio), form input:not(.form-number), form textarea', function () {\n            if ($(this).hasClass('form-textarea')) {\n                $(this).parent().parent().addClass(\"focused\");\n            }\n            else {\n                $(this).parent().addClass(\"focused\");\n            }\n\n        });\n\n        $('.path-mon-compte:not(.path-mon-compte-gestion-des-comptes, .path-mon-compte-mes-factures, .path-mon-compte-mon-agence-itga) #content .submenu-container ul.submenu_page li:first-child').addClass('active');\n\n\n        if ($(this).val().length === 0) {\n            $(this).parent().removeClass(\"focused\");\n        }\n\n        //mobile fixes\n        var windowsize = $(window).width();\n        if (windowsize < 500) {\n            //force Youtube iframe to have 100% width :\n            $('section.video_agence iframe').attr('width', '100%');\n\n            //accordeons footer\n            $('#block-agencefooter .field').hide();\n            $('#block-agencefooter h2').append('<img class=\"chevron\" src=\"/themes/itgatheme/images/chevron-black.svg\" />');\n            $('#block-agencefooter h2').click(function () {\n                $('.active').removeClass('active');\n                $('#block-agencefooter h2').toggleClass('rotated');\n                $('#block-agencefooter .field').addClass('active');\n                $('.active').slideToggle();\n            });\n\n            $('nav#block-itgatheme-footer ul').hide();\n            $('nav#block-itgatheme-footer h2').append('<img class=\"chevron\" src=\"/themes/itgatheme/images/chevron-black.svg\" />');\n            $('nav#block-itgatheme-footer h2').click(function () {\n                $('.active').removeClass('active');\n                $('nav#block-itgatheme-footer h2').toggleClass('rotated');\n                $('nav#block-itgatheme-footer ul').addClass('active');\n                $('.active').slideToggle();\n            });\n\n            $('#block-views-block-liste-actus-footer-block-1 div').hide();\n            $('#block-views-block-liste-actus-footer-block-1 h2').append('<img class=\"chevron\" src=\"/themes/itgatheme/images/chevron-black.svg\" />');\n            $('#block-views-block-liste-actus-footer-block-1 h2').click(function () {\n                $('.active').removeClass('active');\n                $('#block-views-block-liste-actus-footer-block-1 h2').toggleClass('rotated');\n                $('#block-views-block-liste-actus-footer-block-1 div').addClass('active');\n                $('.active').slideToggle();\n            });\n\n\n        }\n        if (windowsize < 1024) {\n            $('nav#block-menutop ul li').click(function (event) {\n                if ($('nav#block-menutop ul li ul').is(':visible')) {\n                    // $(this).parent().click(function(event) {\n                    $('nav#block-menutop ul li ul').addClass('hidden');\n                    // });\n                } else {\n                    $('nav#block-menutop ul li ul').removeClass('hidden');\n\n                }\n            })\n        }\n        //disable menu elements\n        $('a.fidelity').click(function (event) {\n            event.preventDefault();\n        });\n\n\n        //default all actus selected\n        $('.path-actualites #block-itgatheme-content .tags a').each(function () {\n            if ($(this).hasClass('active')) {\n                $('.home_actus').removeClass('home_actus');\n            }\n        });\n\n        //bypass term link on actu node\n        var linktag = $('body.page-node-type-actualite .node--type-actualite .field--name-field-tags-actu .field__item a');\n\n        linktag.each(function () {\n            var href = $(this).attr('href');\n            if (typeof href !== typeof undefined && href !== false) {\n                var linkprefx = $(this).attr('href');\n                linkok = linkprefx.replace('taxonomy/term/', 'actualites/tag/');\n                $(this).attr('href', linkok);\n            }\n        });\n\n\n        // form consommables\n        $('#webform-submission-commande-consommables-add-form .js-form-item').each(function () {\n            var helpWebForm = $(this).find('a.webform-element-help').attr('data-webform-help');\n            var title = $(this).find('span').text().replace('?', '');\n            $(this).find('span').text('');\n            $(this).find('span').append('<h3>' + title + '</h3>');\n            $(this).find('span').append('<div class=\"detail\">' + helpWebForm + '</div>');\n            $(this).find('a.webform-element-help').remove();\n        });\n\n        $('.detailMateriaux').off('click').on('click', function (e) {\n            if ($(this).hasClass('loading')) {\n                return false;\n            }\n            else if ($(this).parents('tr').hasClass('opened')) {\n                $(this).parents('tr').next().remove();\n                $(this).parents('tr').removeClass('opened');\n                $(this).parents('tr').find('.detailMateriaux').text('Détails');\n            } else {\n                $('.detail-commande.loaded').remove();\n                $('.labo-suivi-commandes').find('.detailMateriaux').text('Détails');\n                $(this).parents('tr').addClass('opened');\n                $(this).addClass('loading');\n                addLoader();\n\n                $.ajax({\n                    url: '/labo/commande/details?ref=' + $(this).attr('attr-ref') + '&nbEchantillons=' + $(this).parents('tr').attr('nbEchantillons') + '&nbEchantillonsMateriaux=' + $(this).parents('tr').attr('nbEchantillonsMateriaux') + '&nbEchantillonsFiltres=' + $(this).parents('tr').attr('nbEchantillonsFiltres') + '&nbEchantillonsFiltresSurOperateur=' + $(this).parents('tr').attr('nbEchantillonsFiltresSurOperateur') + '&nbEchantillonsFiltresPosteFixe=' + $(this).parents('tr').attr('nbEchantillonsFiltresPosteFixe') + '&nbEchantillonsLegionelles=' + $(this).parents('tr').attr('nbEchantillonsLegionelles'),\n                    type: 'POST',\n                    data: '',\n                    cache: false,\n                    //dataType: 'json',\n                    context: this,\n                    processData: false, // Don't process the files\n                    contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                    success: function (data, textStatus, jqXHR) {\n                        var detail =\n                            '<tr class=\"detail-commande loaded\">\\n' +\n                            '   <td class=\"hidden\" colspan=\"13\">' + data + '</td>\\n' +\n                            '</tr>';\n                        removeLoader();\n\n\n                        $(this).parents('tr').find('.detailMateriaux').text('Fermer');\n                        $(this).parents('tr').find('.detailMateriaux').addClass('close-detail-commande');\n\n                        $(detail).insertAfter($(this).parents('tr'));\n                        $(this).parents('tr').next().find('td').removeClass('hidden');\n\n                        showHideColumns();\n\n                        $('input[name=searchEchantillon]').focus().off('keyup').on('keyup', function () {\n                            $(this).parents('tr').find('.noResultSearch').remove();\n                            $(this).parents('tr').find('table.detailsEchantillon').show();\n\n                            var value = this.value.toLowerCase();\n\n                            $(this).parents('tr').find('table.detailsEchantillon tbody tr').hide().each(function () {\n                                if ($(this).text().toLowerCase().search(value) > -1) {\n                                    $(this).show();\n                                }\n                            });\n\n                            $(this).parents('tr').find('.searchResultsCount').text($(this).parents('tr').find('table.detailsEchantillon tbody tr:visible').length + '/' + $(this).parents('tr').find('table.detailsEchantillon tbody tr').length);\n                            if ($(this).parents('tr').find('table.detailsEchantillon tbody tr:visible').length <= 0) {\n                                $(this).parents('tr').find('table.detailsEchantillon').hide();\n                                $(this).parents('tr').find('table.detailsEchantillon').after('<div class=\"noResultSearch\">Aucun résultat pour cette recherche.</div>');\n                                //$('<div class=\"noResultSearch\">Aucun résultat pour cette recherche.</div>').insertBefore('.labo-suivi-commandes table');\n                            }\n\n                        });\n\n                        $(this).parents('tr').next().find('.detailsEchantillon').tablesorter({\n                            dateFormat: \"ddmmyyyy\", // set the default date format\n                            headers: {\n                                2: {sorter: 'shortDate'}\n                            }\n                        });\n\n                        $(this).parents('tr').next().find('.detailsEchantillon th:last-child').click();\n                        $(this).removeClass('loading');\n                    },\n                    error: function (jqXHR, textStatus, errorThrown) {\n                        removeLoader();\n                    }\n                });\n            }\n        });\n\n        $(\".mesFactures table\").tablesorter({\n            dateFormat: \"ddmmyyyy\", // set the default date format\n            headers: {\n                5: {sorter: 'shortDate'},\n                6: {sorter: 'shortDate'},\n                8: {filter: false}\n            }\n        });\n\n        $('.labo-suivi-commandes > table tr th:first-child').click();\n        $('.labo-suivi-commandes > table tr th:first-child').click();\n\n        $('.labo-suivi-commandes table th').click(function () {\n            $('.labo-suivi-commandes table tr').each(function () {\n                if ($(this).hasClass('detail-commande')) {\n                    $(this).remove();\n                }\n                if ($(this).hasClass('opened')) {\n                    $(this).removeClass('opened');\n                }\n            });\n        })\n\n        var checkbox = $('.custom-modal input#macheckbox');\n        var submit = $('.custom-modal input#firstconnexionsubmit');\n        submit.css('opacity', '0.5');\n        checkbox.prop('checked', false);\n        submit.attr('disabled', 'disabled');\n\n        checkbox.click(function () {\n            if ($(this).is(':checked')) {\n                submit.removeAttr('disabled');\n                submit.css('opacity', '1');\n            } else {\n                submit.attr('disabled', 'disabled');\n                submit.css('opacity', '0.5');\n            }\n        });\n\n        $('body header .wrap nav>ul li a.more + ul li').last().on('click', function () {\n            $('#modal-generic .modal-body').html('');\n            $('#modal-generic .modal-title').text('Déconnexion');\n            $('#modal-generic .modal-body').html($('.content-modal-logout').html());\n            $('#modal-generic').modal();\n        })\n\n        $('.custom-modal-body .close-modal').on('click', function () {\n            $(this).parent().parent().removeClass('visible');\n            $('.overlay').removeClass(\"visible\");\n        });\n\n\n        $('.labo-suivi-commandes input[name=searchCommandes]').focus().off('keyup').on('keyup', function () {\n            $('.labo-suivi-commandes table').show();\n            $('.noResultSearch').remove();\n\n            var value = this.value.toLowerCase();\n\n            $('.labo-suivi-commandes table tr.detailsCommande').hide().each(function () {\n                if ($(this).text().toLowerCase().search(value) > -1) {\n                    $(this).show();\n                }\n            });\n\n            $('.labo-suivi-commandes .searchResultsCount').text($('.labo-suivi-commandes table tr.detailsCommande:visible').length + '/' + $('.labo-suivi-commandes table tr.detailsCommande').length);\n            if ($('.labo-suivi-commandes table tr.detailsCommande:visible').length <= 0) {\n                $('.labo-suivi-commandes table').hide();\n                $('.labo-suivi-commandes table').after('<div class=\"noResultSearch\">Aucun résultat pour cette recherche.</div>');\n            }\n        });\n\n        $('.suivi-factures input[name=searchFactures]').focus().off('keyup').on('keyup', function () {\n            $('.suivi-factures table').show();\n            $('.noResultSearch').remove();\n\n            var value = this.value.toLowerCase();\n\n            $('.suivi-factures table tr.detailsFacture').hide().each(function () {\n                if ($(this).text().toLowerCase().search(value) > -1) {\n                    $(this).show();\n                }\n            });\n\n            $('.suivi-factures .searchResultsCount').text(\"Nombre de factures : \" + $('.suivi-factures table tr.detailsFacture:visible').length + '/' + $('.suivi-factures table tr.detailsFacture').length);\n            if ($('.suivi-factures table tr.detailsFacture:visible').length <= 0) {\n                $('.suivi-factures table').hide();\n                $('.suivi-factures table').after('<div class=\"noResultSearch\">Aucun résultat pour cette recherche.</div>');\n            }\n        });\n\n        // Labo checkbox columns\n        $('.table-columns-configuration input').off('click').on('click', function () {\n            var cookieVals = {};\n            $('.table-columns-configuration input').each(function (index) {\n                cookieVals[$(this).val()] = $(this).is(':checked');\n            });\n            setCookie('laboColumns', JSON.stringify(cookieVals), 30);\n            showHideColumns();\n        });\n\n\n        // Gestion des icônes de tri pour le suivi des commandes\n        if(window.location.pathname == \"/suivi-commandes\") {\n            var o = getUrlParameter('o');\n            var s = getUrlParameter('s');\n            if(o == \"ref\") {\n                $('.ReferenceClientCommande .asc-desc-container .order-'+s).hide();\n            }\n            else if(o == \"date\") {\n                $('.DateDeLaCommande .asc-desc-container .order-'+s).hide();\n            }\n        }\n\n        showHideColumns();\n\n\n        // Gestion Dropdown\n        $('.dropdown button').click(function () {\n            $(this).parent().toggleClass('active');\n            $(this).parents().siblings().children('.dropdown-menu').hide();\n            $(this).siblings().toggle();\n            //$(this).siblings().toggle();\n        });\n\n        // Forgotten password\n        $('.forgot-password').click(function(){\n            $('.to-hide').fadeOut();\n            $('.forgotten-password').fadeIn();;\n\n        });\n\n        // Filter account\n        $('input[name=\"searchUser\"]').off('keyup').on('keyup', function () {\n            var value = this.value.toLowerCase();\n            $('.path-mon-compte .userList>.flex div[id^=\"user\"]').hide().each(function () {\n                if($(this).text().toLowerCase().search(value) > -1) {\n                    $(this).show();\n                }\n            });\n        });\n\n        // Toutes les actualités : active link\n        if(location.pathname == '/actualites'){\n            $('#content .submenu-container ul.submenu_page li:first-child a').addClass('active');\n        }\n\n        // Si pas d'actus dans une rubrique alors on souligne la rubrique \"TOUT\"\n        if(location.pathname == '/actualites/'){\n            if($('#block-itgatheme-content .no-actus').length > 0) {\n                $('#content .submenu-container ul.submenu_page li:first-child a').addClass('active');\n            }\n        }\n\n        // bibliotheque-itga : active link\n        if(location.pathname == '/bibliotheque-itga'){\n            $('#content .submenu-container ul.submenu_page li:first-child a').addClass('active');\n        }\n\n        // Validation formulaire : Déjà client ITGA ?\n        if(location.pathname == '/form/deja-client-itga'){\n            validationForm('form.webform-submission-deja_client_itga-form');\n        }\n\n        // FAQ\n        if(location.pathname == '/faq'){\n            $('.accordion-single').click();\n        }\n\n        // Validation formulaire : Je ne suis pas déjà client ITGA ?\n        if(location.pathname == '/form/je-ne-suis-pas-client-itga'){\n            validationForm('form.webform-submission-je_ne_suis_pas_client_itga-form');\n            $('#edit-fake-submit .fake-submit').click(function(){\n\n                if($('.js-form-type-select').find('.js-validate-error-label').length == 0) {\n                    $(\"form.webform-submission-je_ne_suis_pas_client_itga-form input[type='submit']\").click();\n                }\n\n                if($('.form-item-message textarea').val() == ''){\n                    if($('.form-item-message').find('.js-validate-error-label').length == 0) {\n                        displayErrorForm('.form-item-message textarea', 'Veuillez renseigner votre message.');\n                    }\n                }\n\n                if($('.js-form-type-select select').val() == ''){\n                    if($('.js-form-type-select').find('.js-validate-error-label').length == 0) {\n                        displayErrorForm('.js-form-type-select select', \"Veuillez sélectionner un département.\");\n                    }\n                }\n\n                if($('.form-item-message textarea').val() != '' && $('.js-form-type-select select').val() != '') {\n                    $(\"form.webform-submission-je_ne_suis_pas_client_itga-form input[type='submit']\").click();\n                }\n            });\n        }\n\n        // Validation formulaire : Contact\n        if(location.pathname == '/contact'){\n            $('#edit-fake-submit .fake-submit').click(function(){\n                if($('.form-item-message textarea').val() == ''){\n                    if($('.form-item-message').find('.js-validate-error-label').length == 0) {\n                        displayErrorForm('.form-item-message textarea', 'Veuillez renseigner votre message.');\n                    }\n                }\n\n                if($('.form-item-votre-demande-concerne select').val() == ''){\n                    if($('.form-item-votre-demande-concerne').find('.js-validate-error-label').length == 0) {\n                        displayErrorForm('.form-item-votre-demande-concerne select', \"Veuillez sélectionner une option.\");\n                    }\n                }\n\n                if($('.form-item-message textarea').val() != '' && $('.form-item-votre-demande-concerne select').val() != '') {\n                    $(\"form.webform-submission-contact-form\").submit();\n                }\n            });\n        }\n\n\n        // Formulaire commande consommables\n        $('.validation_commande_conso').click(function() {\n            var allempty = true;\n            $('.webform-submission-commande_consommables-form input[type=\"number\"]').each(function() {\n                console.log($(this).val());\n                if($(this).val() != 0) {\n                    allempty = false;\n                }\n            });\n\n            if(allempty) {\n                swal(\"\", \"Veuillez renseigner une quantité pour au moins un des lots afin de passer commande.\", \"error\");\n            }\n            else {\n                $('.webform-submission-commande_consommables-form input[type=\"submit\"]').click();\n            }\n        });\n\n        $('.webform-submission-commande_consommables-form input[type=\"number\"]').keypress(function( event ) {\n            if ( event.which == 13 ) {\n                var allempty = true;\n                $('.webform-submission-commande_consommables-form input[type=\"number\"]').each(function() {\n                    console.log($(this).val());\n                    if($(this).val() != 0) {\n                        allempty = false;\n                    }\n                });\n\n                if(allempty) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    swal(\"\", \"Veuillez renseigner une quantité pour au moins un des lots afin de passer commande.\", \"error\");\n                }\n            }\n        });\n\n        $('body').addClass(detectIE);\n\n        // Check modal nouveau compte à activer\n        if($('.open-modal-manage-account').length > 0 && !getCookie('modal-manage-account')) {\n            $('#modal-generic .modal-body').html('');\n            $('#modal-generic .modal-title').text('Gestion des comptes');\n            $('#modal-generic .modal-body').html($('.content-modal-compte-inactifs').html());\n            $('#modal-generic').modal();\n            setCookie('modal-manage-account', true, 1);\n        }\n\n        if($('.open-modal-absence-account').length > 0) {\n            openModal('Ajout de collaborateurs','.content-modal-absence-comptes');\n        }\n\n        $('.btn-default.create-account').click(function(){\n            $('#modal-generic').modal('hide');\n            $('.path-mon-compte .intro-gestion-compte .add-account').click();\n        });\n\n        $('.btn-default.open-another-popin').click(function(){\n            openModal('Ajout de collaborateur','.content-modal-another-popin');\n        });\n\n    });\n\n});\n\n\nfunction displayErrorForm($element, message) {\n    var div = document.createElement('div');\n    var element = document.querySelector($element);\n    div.innerHTML = message;\n    div.className = 'js-validate-error-label';\n    div.setAttribute('style', 'color: #B81111');\n    console.log(element.parentNode);\n    element.parentNode.insertBefore(div, element.nextSibling);\n}\n\nfunction validationForm(element) {\n    new window.JustValidate(element, {\n        Rules: {\n            email: {\n                required: true,\n                email: true\n            },\n            text: {\n                required: true,\n                maxLength: 300\n            },\n            phone: {\n                required: true,\n                phone: true,\n                maxLength: 10,\n                minLength: 10\n            },\n            textarea: {\n                required: true,\n                maxLength: 30000\n            }\n        },\n    });\n}\n\n/**\n * detect IE\n * returns version of IE or false, if browser is not Internet Explorer\n */\n\nfunction detectIE() {\n    var ua = window.navigator.userAgent;\n\n    var msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n        // IE 10 or older => return version number\n        var ieV = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        document.querySelector('body').className += ' IE';\n    }\n\n    var trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n        // IE 11 => return version number\n        var rv = ua.indexOf('rv:');\n        var ieV = parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        document.querySelector('body').className += ' IE';\n    }\n\n    var edge = ua.indexOf('Edge/');\n    if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        var ieV = parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n        document.querySelector('body').className += ' IE';\n    }\n\n    // other browser\n    return false;\n}\n\nfunction openModal(title, element) {\n    jQuery('#modal-generic .modal-body').html('');\n    jQuery('#modal-generic .modal-title').text(title);\n    jQuery('#modal-generic .modal-body').html(jQuery(element).html());\n    jQuery('#modal-generic').modal();\n}\n\nfunction showHideColumns(){\n    var cookieVals = getCookie('laboColumns');\n\n    if(cookieVals == '' || cookieVals == undefined){\n        var cookieVals = {};\n        jQuery('.table-columns-configuration input').each(function(index){\n            cookieVals[jQuery(this).val()] = true;\n        });\n        setCookie('laboColumns', JSON.stringify(cookieVals), 30);\n    }\n\n    cookieVals = JSON.parse(getCookie('laboColumns'));\n\n    if(getCookie('laboColumns') == '{}'){\n        var cookieVals = {};\n        jQuery('.table-columns-configuration input').each(function(index){\n            cookieVals[jQuery(this).val()] = true;\n        });\n        setCookie('laboColumns', JSON.stringify(cookieVals), 30);\n    }\n\n    jQuery.each(cookieVals, function (index, value) {\n        jQuery('.table-columns-configuration input[value=' + index + ']').attr('checked', value);\n\n        if (value) {\n            jQuery('th.' + index + ', td.' + index).show();\n        } else {\n            jQuery('th.' + index + ', td.' + index).hide();\n        }\n    });\n}\n\n\n\n// Effet d'affichage des blocs\nfunction check_if_in_view() {\n  var $animation_elements = jQuery('.anim');\n  var $window = jQuery(window);\n  var window_height = $window.height();\n  var window_top_position = $window.scrollTop();\n  var window_bottom_position = (window_top_position + window_height);\n\n  jQuery.each($animation_elements, function() {\n    var $element = jQuery(this);\n    var element_height = $element.outerHeight();\n    var element_top_position = $element.offset().top;\n    var element_bottom_position = (element_top_position + element_height);\n\n    //check to see if this current container is within viewport\n    if ((element_bottom_position >= window_top_position) &&\n        (element_top_position <= window_bottom_position)) {\n          $element.addClass('active');\n    }\n  });\n}\n\nfunction addLoader(){\n    removeLoader();\n    jQuery('body').append('<div class=\"loader-wrapper\"><img style=\"width:100px;\" src=\"/themes/itgatheme/assets/images/loader.svg\" class=\"ajaxLoader\" /></div>');\n}\n\nfunction removeLoader(){\n    jQuery('body').find('.loader-wrapper').remove();\n}\n\n\nfunction setCookie(cname, cvalue, exdays) {\n    var d = new Date();\n    d.setTime(d.getTime() + (exdays*24*60*60*1000));\n    var expires = \"expires=\"+ d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nfunction getCookie(cname) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for(var i = 0; i <ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\nfunction eraseCookie(name) {\n    createCookie(name,\"\",-1);\n}\n\nfunction genericModal(title, content){\n    jQuery('#modal-generic .modal-title').html(title);\n    jQuery('#modal-generic .modal-body').html(content);\n    jQuery('#modal-generic').modal('show');\n}\n\nfunction getUrlParameter(sParam) {\n    var sPageURL = window.location.search.substring(1),\n        sURLVariables = sPageURL.split('&'),\n        sParameterName,\n        i;\n\n    for (i = 0; i < sURLVariables.length; i++) {\n        sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === sParam) {\n            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n        }\n    }\n}","jQuery(function ($) {\n\n    var modificationTypeButton = 'modifier';\n\n    // -------------------------------------------------------\n    // ----------------- Modifier MON PROFIL -----------------\n    // -------------------------------------------------------\n    $('.changeProfil').off('click').on('click', function(e) {\n        e.preventDefault();\n        $('#modal-edit-account .modal-body').html('');\n        $('#modal-edit-account h4').html('Modifier mes informations');\n        $('.mon-compte > form').clone().appendTo('#modal-edit-account .modal-body');\n        $('#modal-edit-account').modal();\n        //$('#modal-edit-account .modal-body .value span').hide();\n        $('#modal-edit-account #monCompteUpdate .change-password').hide();\n        $('#modal-edit-account #monCompteUpdate .hidden').removeClass('hidden');\n        $('#modal-edit-account .modal-body input[type=submit]').removeClass('hidden');\n\n        new window.JustValidate('#modal-edit-account .modal-body #monCompteUpdate', {\n            Rules: {\n                email: {\n                    required: true,\n                    email: true\n                },\n                text: {\n                    required: true,\n                    maxLength: 300\n                },\n                phone: {\n                    required: true,\n                    phone: true,\n                    maxLength: 10,\n                    minLength: 10\n                }\n            },\n        });\n\n        $('form#monCompteUpdate').off('submit').on('submit', function(e) {\n            e.preventDefault();\n\n            if($('.js-validate-error-label').length == 0) {\n\n                swal({\n                    text: \"Vous allez modifier vos informations de compte. Merci de valider l'action.\",\n                    type: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonText: 'Ok',\n                    cancelButtonText: 'Annuler'\n                }).then(function(willUpdate) {\n                        if (willUpdate) {\n\n                            addLoader();\n\n                            updateForm = $('#modal-edit-account form#monCompteUpdate');\n\n                            $.ajax({\n                                url: '/mon-compte/ajax',\n                                type: 'POST',\n                                data: jQuery.param({\n                                    WorkPhone: updateForm.find('input[name=userWorkPhone]').val(),\n                                    firstName: updateForm.find('input[name=userFirstName]').val(),\n                                    lastName: updateForm.find('input[name=userLastName]').val(),\n                                    Title: updateForm.find('input[name=userTitle]').val()\n                                }),\n                                cache: false,\n                                dataType: 'json',\n                                context: updateForm,\n                                processData: false, // Don't process the files\n                                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                                // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                                success: function (data, textStatus, jqXHR) {\n                                    removeLoader();\n\n                                    if (!data.error) {\n                                        $('.mon-compte #monCompteUpdate input[name=userWorkPhone]').parent().find('span').html(updateForm.find('input[name=userWorkPhone]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userWorkPhone]').parent().find('input[type=text]').val(updateForm.find('input[name=userWorkPhone]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userFirstName]').parent().find('span').html(updateForm.find('input[name=userFirstName]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userFirstName]').parent().find('input[type=text]').val(updateForm.find('input[name=userFirstName]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userLastName]').parent().find('span').html(updateForm.find('input[name=userLastName]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userLastName]').parent().find('input[type=text]').val(updateForm.find('input[name=userLastName]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userTitle]').parent().find('span').html(updateForm.find('input[name=userTitle]').val());\n                                        $('.mon-compte #monCompteUpdate input[name=userTitle]').parent().find('input[type=text]').val(updateForm.find('input[name=userTitle]').val());\n\n                                        $('#modal-edit-account').modal('toggle');\n                                    } else {\n                                        removeLoader();\n                                        swal(data.msg);\n                                    }\n                                },\n                                error: function (jqXHR, textStatus, errorThrown) {\n                                    removeLoader();\n                                    swal(textStatus)\n                                }\n                            });\n                    }\n                });\n\n            }\n            else {\n                removeLoader();\n                swal(\"\", 'Veuillez renseigner tous les champs', \"error\");\n            }\n        });\n    });\n\n    // ===================================================================================\n    // ===================================================================================\n    // ===================================================================================\n    // ===================================================================================\n\n    // -------------------------------------------------------------\n    // ----------------- Valider un PROFIL INACTIF -----------------\n    // -------------------------------------------------------------\n    $('.accountValidation').off('click').on('click', function(e) {\n        e.preventDefault();\n\n        $('#modal-edit-account .modal-body').html('');\n        $('#modal-edit-account h4').html('Modification du compte avant activation');\n\n\n        $('#userRoles').clone().appendTo('#modal-edit-account .modal-body');\n        $('#monCompteUpdate').clone().prependTo('#modal-edit-account .modal-body #userRoles');\n        $('<h4>Informations personnelles</h4>').prependTo('#modal-edit-account .modal-body');\n\n        addLoader();\n\n        $.ajax({\n            url: '/mon-compte/gestion-des-comptes/details-compte/'+$(this).attr('userId'),\n            type: 'POST',\n            data: jQuery.param({email: $(this).find('input[name=email]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n\n                if(!data.error){\n\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userWorkPhone\"]').val(data.details.user.WorkPhone);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userFirstName\"]').val(data.details.user.FirstName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userLastName\"]').val(data.details.user.LastName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userTitle\"]').val(data.details.user.Title);\n\n\n                    // On doit désactiver le mode readonly le temps de renseigner les champs\n                    userFields = {\n                        'userAccountId': data.details.user.AccountId,\n                        'userEmail': data.details.user.Email,\n                        'accountAccount': data.details.account.Account,\n                        'accountAddress': data.details.account.Address,\n                        'userProfil': data.details.account.Typology.Description,\n                        'accountPostalCode': data.details.account.PostalCode,\n                        'accountCity': data.details.account.City,\n                        'login': data.details.user.Login,\n                        'ContactId': data.details.user.ContactId,\n                        'MadraLogin': data.details.user.MadraLogin,\n                        'MadraPassword': data.details.user.MadraPassword\n                    };\n\n                    Object.keys(userFields).forEach(function(key, index)  {\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('readonly', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('disabled', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').val(userFields[key]);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('readonly', true);\n                    });\n\n                    var userRoles = [];\n\n                    if(data.details.user.Profiles.length != 0){\n                        for(var i= 0; i < data.details.user.Profiles.length; i++){\n                            userRoles.push(data.details.user.Profiles[i].Code);\n                        }\n                    }\n\n                    $('#modal-edit-account .modal-body .userRoles .focused input[type=\"checkbox\"]').each(function(){\n                        $(this).attr('name', $(this).attr('name').replace('-hidden-form', ''));\n                        $(this).attr('id', $(this).attr('id').replace('-hidden-form', ''));\n                        if(userRoles.includes($(this).attr('name').toUpperCase())) {\n                            $(this).prop('checked', true);\n                        }\n                    });\n\n\n\n                    removeLoader();\n\n\n                    $('#modal-edit-account').modal();\n\n\n                    //$('form.userRoles').find('input[type=checkbox]').removeAttr('checked');\n\n                    $.each(data.drupalRoles, function(index, value){\n                        $('form.userRoles').find('input[name='+value+']').attr('checked', 'checked');\n                    });\n\n\n                    checkRoles();\n\n                    $('form.userRoles').attr('userId', data.details.user.Id);\n\n                    $('form.userRoles').off('submit').on('submit', function(e) {\n                        e.preventDefault();\n                        addLoader();\n\n                        if($('#modal-edit-account .userRolesContent input:checked').length >= 1 && $('.js-validate-error-label').length == 0) {\n\n                            var dataFrm = new FormData();\n                            $('form.userRoles').find('input[type=checkbox]').each(function (index) {\n                                dataFrm.append($(this).attr('name'), $(this).is(':checked'));\n                            });\n\n                            dataFrm.append('login', $(this).find('input[name=login]').val());\n                            dataFrm.append('AccountId', $(this).find('input[name=userAccountId]').val());\n                            dataFrm.append('ContactId', $(this).find('input[name=contactId]').val());\n                            dataFrm.append('MadraLogin', $(this).find('input[name=madraLogin]').val());\n                            dataFrm.append('MadraPassword', $(this).find('input[name=madraPassword]').val());\n\n                            dataFrm.append('WorkPhone', $(this).find('input[name=userWorkPhone]').val());\n                            dataFrm.append('firstName', $(this).find('input[name=userFirstName]').val());\n                            dataFrm.append('lastName', $(this).find('input[name=userLastName]').val());\n                            dataFrm.append('Title', $(this).find('input[name=userTitle]').val());\n\n                            $.ajax({\n                                url: '/mon-compte/gestion-des-comptes/details/' + $(this).attr('userId') + '/updateAccount/?validation=true',\n                                type: 'POST',\n                                data: dataFrm,\n                                cache: false,\n                                dataType: 'json',\n                                context: this,\n                                processData: false, // Don't process the files\n                                //contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                                contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                                success: function (data, textStatus, jqXHR) {\n                                    swal(\"\", data.msg, \"success\");\n\n                                    $('#modal-edit-account').modal('hide');\n                                    $('#user' + $(this).attr('userId')).removeClass('to-validate');\n                                    $('#user' + $(this).attr('userId')).addClass('waiting-first-connexion');\n                                    $('.validation-users > .flex #user' + $(this).attr('userId')).clone(true).prependTo('.userList.first-connexion div.tab-content');\n                                    $('.validation-users > .flex #user' + $(this).attr('userId')).remove();\n                                    if($('.validation-users .flex .userBlock').length <= 0) {\n                                        $('.validation-users').remove();\n                                    }\n                                    removeLoader();\n                                },\n                                error: function (jqXHR, textStatus, errorThrown) {\n                                    swal(\"\", textStatus, \"error\");\n                                    $('#modal-edit-account').modal('hide');\n                                    removeLoader();\n                                }\n                            });\n                        }\n                        else if($('#modal-edit-account .userRolesContent input:checked').length == 0) {\n                            removeLoader();\n                            swal(\"\", 'Veuillez sélectionner au moins un type de profil.', \"error\");\n                        }\n                        else if($('.js-validate-error-label').length >= 1) {\n                            removeLoader();\n                            swal(\"\", 'Veuillez renseigner les informations', \"error\");\n                        }\n                    });\n                } else {\n                    removeLoader();\n                    swal(\"\", data.msg, \"error\");\n                    $('#modal-edit-account').modal('hide');\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n\n            }\n        });\n    });\n\n    // ------------------------------------------------------\n    // ----------------- Modifier un PROFIL -----------------\n    // ------------------------------------------------------\n    $('.modifierUserAccount').off('click').on('click', function(e) {\n        e.preventDefault();\n\n        if(modificationTypeButton == 'reactiver'){\n            $('#modal-edit-account .modal-body').html('');\n            $('#modal-edit-account h4').html('Réactivation du compte');\n        } else {\n            $('#modal-edit-account .modal-body').html('');\n            $('#modal-edit-account h4').html('Modification du compte');\n        }\n\n\n        $('#userRoles').clone().appendTo('#modal-edit-account .modal-body');\n        $('#monCompteUpdate').clone().prependTo('#modal-edit-account .modal-body #userRoles');\n        $('#modal-edit-account #monCompteUpdate').css('margin-top','20px');\n        $('<h4>Informations personnelles</h4>').prependTo('#modal-edit-account .modal-body');\n\n        // Si le compte est en attente de première connexion\n        var waitingFirstConnexion = false;\n        if($(this).parents('.userBlock').find('.status-first-connexion').val() == \"1\") {\n            waitingFirstConnexion = true;\n        }\n\n        // Visibilité des rapports envoyés à d'autres collaborateurs\n        setVisibiliteRapport();\n\n        addLoader();\n\n        $.ajax({\n            url: '/mon-compte/gestion-des-comptes/details-compte/'+$(this).attr('userId'),\n            type: 'POST',\n            data: jQuery.param({email: $(this).find('input[name=email]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: {waitingFirstConnexion : waitingFirstConnexion },\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                if(!data.error){\n\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userWorkPhone\"]').val(data.details.user.WorkPhone);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userFirstName\"]').val(data.details.user.FirstName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userLastName\"]').val(data.details.user.LastName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userTitle\"]').val(data.details.user.Title);\n\n                    // On doit désactiver le mode readonly le temps de renseigner les champs\n                    userFields = {\n                        'userAccountId': data.details.user.AccountId,\n                        'userEmail': data.details.user.Email,\n                        'accountAccount': data.details.account.Account,\n                        'accountAddress': data.details.account.Address,\n                        'userProfil': data.details.account.Typology.Description,\n                        'accountPostalCode': data.details.account.PostalCode,\n                        'accountCity': data.details.account.City,\n                        'login': data.details.user.Login,\n                        'ContactId': data.details.user.ContactId,\n                        'MadraLogin': data.details.user.MadraLogin,\n                        'MadraPassword': data.details.user.MadraPassword\n                    };\n\n                    Object.keys(userFields).forEach(function(key, index)  {\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('readonly', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('disabled', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').val(userFields[key]);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('readonly', true);\n                    });\n\n                    var userRoles = [];\n                    if(data.details.user.Profiles.length != 0){\n                        for(var i= 0; i < data.details.user.Profiles.length; i++){\n                            userRoles.push(data.details.user.Profiles[i].Code);\n                        }\n                    }\n\n                    $('#modal-edit-account .modal-body .userRoles .focused input[type=\"checkbox\"], #modal-edit-account .modal-body .userRoles .focused input[type=\"radio\"]').each(function(){\n                        $(this).attr('name', $(this).attr('name').replace('-hidden-form', ''));\n                        $(this).attr('id', $(this).attr('id').replace('-hidden-form', ''));\n                        //if(waitingFirstConnexion) {\n                        //    $(this).prop('disabled', true);\n                        //}\n                        if(userRoles.includes($(this).attr('name').toUpperCase())) {\n                            $(this).prop('checked', true);\n                        }\n                    });\n\n                    checkRoles();\n\n                    new window.JustValidate('#modal-edit-account .modal-body form.userRoles', {\n                        Rules: {\n                            email: {\n                                required: true,\n                                email: true\n                            },\n                            text: {\n                                required: true,\n                                maxLength: 300,\n                            },\n                            phone: {\n                                required: true,\n                                phone: true,\n                                maxLength: 10,\n                                minLength: 10\n                            }\n                        },\n                    });\n\n                    removeLoader();\n\n                    $('#modal-edit-account').modal();\n\n                    $('#modal-edit-account .modal-body form.userRoles').attr('userId', data.details.user.Id);\n\n                    $('#modal-edit-account .modal-body form.userRoles').off('submit').on('submit', function(e) {\n                        addLoader();\n\n                        if($('.js-validate-error-label').length == 0) {\n                            e.preventDefault();\n\n                            var dataFrm = new FormData();\n                            $('#modal-edit-account .modal-body form.userRoles').find('input[type=checkbox]').each(function (index) {\n                                dataFrm.append($(this).attr('name'), $(this).is(':checked'));\n                            });\n\n                            dataFrm.append('login', $(this).find('input[name=login]').val());\n                            dataFrm.append('AccountId', $(this).find('input[name=userAccountId]').val());\n                            dataFrm.append('ContactId', $(this).find('input[name=contactId]').val());\n                            dataFrm.append('MadraLogin', $(this).find('input[name=madraLogin]').val());\n                            dataFrm.append('MadraPassword', $(this).find('input[name=madraPassword]').val());\n\n                            dataFrm.append('WorkPhone', $(this).find('input[name=userWorkPhone]').val());\n                            dataFrm.append('firstName', $(this).find('input[name=userFirstName]').val());\n                            dataFrm.append('lastName', $(this).find('input[name=userLastName]').val());\n                            dataFrm.append('Title', $(this).find('input[name=userTitle]').val());\n\n                            if($('input[name=\"email-collabo[]\"]').length > 0){\n                                $('input[name=\"email-collabo[]\"]').each(function() {\n                                    dataFrm.append('email-collabo[]', $(this).val());\n                                });\n                            }\n\n                            $('#user'+$(this).attr('userId')+' h3').text($(this).find('input[name=userFirstName]').val()+ ' '+$(this).find('input[name=userLastName]').val());\n                            $('#user'+$(this).attr('userId')+' p.flex .title').text($(this).find('input[name=userTitle]').val());\n\n                            $.ajax({\n                                url: '/mon-compte/gestion-des-comptes/details/'+$(this).attr('userId')+'/updateAccount/',\n                                type: 'POST',\n                                data: dataFrm,\n                                cache: false,\n                                dataType: 'json',\n                                context: this,\n                                processData: false, // Don't process the files\n                                //contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                                contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                                success: function(data, textStatus, jqXHR) {\n                                    swal(\"\", data.msg, \"success\");\n\n                                    if(modificationTypeButton == 'reactiver') {\n                                        $('div#user'+$(this).attr('userid')).removeClass('disabled');\n\n                                        // si le block était en attente de première connexion\n                                        if ($('div#user'+$(this).attr('userid')).find('.status-is-active').val() == \"1\" && $('div#user'+$(this).attr('userid')).find('.status-first-connexion').val() == \"1\") {\n                                            $('div#user'+$(this).attr('userid')).addClass('waiting-first-connexion');\n                                            $('#user' + $(this).attr('userId')).clone(true).prependTo('.userList.first-connexion .tab-content');\n                                        } else if ($('div#user'+$(this).attr('userid')).find('.status-is-active').val() == \"\" && $('div#user'+$(this).attr('userid')).find('.status-first-connexion').val() == \"1\") {\n                                            // Sinon si le bloc était en attente de validation\n                                            $('div#user'+$(this).attr('userid')).addClass('to-validate');\n                                            $('#user' + $(this).attr('userId')).clone(true).prependTo('.validation-users > .flex');\n                                        } else if ($('div#user'+$(this).attr('userid')).find('.status-is-active').val() == \"1\" && $('div#user'+$(this).attr('userid')).find('.status-first-connexion').val() == \"\") {\n                                            // Sinon si le bloc était actif\n                                            $('div#user'+$(this).attr('userid')).addClass('active');\n                                            $('#user' + $(this).attr('userId')).clone(true).prependTo('.userList.enabled .tab-content');\n                                        }\n\n                                        $('.userList.disabled #user' + $(this).attr('userId')).remove();\n\n                                        if ($('.validation-users .userBlock').length == 0) {\n                                            $('.path-mon-compte .validation-users .flex').text('Aucun compte en attente de validation');\n                                        }\n                                    }\n\n                                    removeLoader();\n                                    $('#modal-edit-account').modal('hide');\n                                },\n                                error: function(jqXHR, textStatus, errorThrown) {\n                                    swal(\"\", data.msg, \"error\");\n                                    removeLoader();\n                                    $('#modal-edit-account').modal('hide');\n                                }\n                            });\n                        }\n                        else {\n                            removeLoader();\n                            swal(\"\", 'Veuillez renseigner tous les champs', \"error\");\n                        }\n\n                    });\n                } else {\n                    removeLoader();\n                    swal(data.msg);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                swal(\"\", data.msg, \"error\");\n            }\n        });\n    });\n\n    // -------------------------------------------------------\n    // ----------------- Détails d'un PROFIL -----------------\n    // -------------------------------------------------------\n    $('.detailsUserAccount').off('click').on('click', function(e) {\n        e.preventDefault();\n        $('#modal-edit-account .modal-body').html('');\n        $('#modal-edit-account h4').html('Détail du compte');\n        $('.detailsMembre').clone().appendTo('#modal-edit-account .modal-body');\n        $('#userRoles').clone().appendTo('#modal-edit-account .modal-body');\n        $('#modal-edit-account .sub-role.visibilite').remove();\n        $('#modal-edit-account #userRoles').addClass('details');\n        $('#modal-edit-account #monCompteUpdate').css('margin-top','20px');\n        $('<h4>Informations personnelles</h4>').prependTo('#modal-edit-account .modal-body');\n        $('#modal-edit-account .required-fields').hide();\n\n        addLoader();\n\n        $.ajax({\n            url: '/mon-compte/gestion-des-comptes/details-compte/'+$(this).attr('userId'),\n            type: 'POST',\n            data: jQuery.param({email: $(this).find('input[name=email]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                removeLoader();\n\n                if(!data.error){\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userWorkPhone\"]').val(data.details.user.WorkPhone);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userFirstName\"]').val(data.details.user.FirstName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userLastName\"]').val(data.details.user.LastName);\n                    $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"userTitle\"]').val(data.details.user.Title);\n\n                    // On doit désactiver le mode readonly le temps de renseigner les champs\n                    userFields = {\n                        'userAccountId': data.details.user.AccountId,\n                        'userEmail': data.details.user.Email,\n                        'accountAccount': data.details.account.Account,\n                        'accountAddress': data.details.account.Address,\n                        'userProfil': data.details.account.Typology.Description,\n                        'accountPostalCode': data.details.account.PostalCode,\n                        'accountCity': data.details.account.City,\n                        'madraLogin': data.details.user.Login\n                    };\n\n                    Object.keys(userFields).forEach(function(key, index)  {\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('readonly', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').prop('disabled', false);\n                        $('#modal-edit-account .modal-body #monCompteUpdate').find('input[name=\"'+key+'\"]').val(userFields[key]);\n                    });\n\n                    $('#modal-edit-account .modal-body #monCompteUpdate input').each(function(){\n                        $(this).prop('readonly', true);\n                        $(this).parent().parent().removeClass('required');\n                    });\n\n                    var userRoles = [];\n                    for(var i= 0; i < data.details.user.Profiles.length; i++){\n                        userRoles.push(data.details.user.Profiles[i].Code);\n                    }\n\n                    $('#modal-edit-account .modal-body .userRoles .focused input[type=\"checkbox\"]').each(function(){\n                        $(this).attr('name', $(this).attr('name').replace('-hidden-form', ''));\n                        $(this).attr('id', $(this).attr('id').replace('-hidden-form', ''));\n                        if(userRoles.includes($(this).attr('name').toUpperCase())) {\n                            $(this).prop('checked', true);\n                        }\n                        $(this).prop('disabled', true);\n                    });\n\n                    checkRoles();\n\n                    $('#modal-edit-account').modal('toggle');\n                } else {\n                    removeLoader();\n                    swal(data.msg);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n\n            }\n        });\n    });\n\n    // ---------------------------------------------------------\n    // ----------------- Search sur les PROFILS -----------------\n    // ---------------------------------------------------------\n    $('input[name=searchUser]').focus().off('keyup').on('keyup', function () {\n        $('.userBlock').show();\n\n        var value = this.value.toLowerCase();\n\n        $('.userBlock').hide().each(function () {\n            if ($(this).text().toLowerCase().search(value) > -1) {\n                $(this).show();\n            }\n        });\n    });\n\n    // ------------------------------------------------------------\n    // ----------------- Réactivation d'un PROFIL -----------------\n    // ------------------------------------------------------------\n    $('.accountActivation').off('click').on('click', function(e) {\n        //e.preventDefault();\n\n        modificationTypeButton = 'reactiver';\n        $(this).parents('.userBlock').find('a.modifierUserAccount').trigger('click');\n    });\n\n    // --------------------------------------------------------\n    // ----------------- Désactiver un PROFIL -----------------\n    // --------------------------------------------------------\n    $(document).on('click', '.accountDesactivation', function() {\n        $('#modal-confirm-disable-account').modal('hide');\n        addLoader();\n\n        $.ajax({\n            url: '/mon-compte/gestion-des-comptes/desactiveuser/'+$(this).attr('userId'),\n            type: 'POST',\n            data: '',//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                removeLoader();\n\n\n\n                if(!data.error){\n\n\n                    if($('.validation-users div.flex .userBlock').length == 0) {\n                        $('.validation-users div.flex').text('');\n                    }\n                    if($('.validation-users div.flex .userBlock').length == 1) {\n                        $('.validation-users div.flex .flex-fix').remove();\n                        $('#user'+$(this).attr('userId')).clone( true ).prependTo('.userList.disabled div.tab-content');\n                        $('<div class=\"flex-fix\"></div>').appendTo($('.validation-users div.flex'));\n                    }\n                    else {\n                        $('#user'+$(this).attr('userId')).clone( true ).prependTo('.userList.disabled div.tab-content');\n                    }\n\n                    $('.userList #user'+$(this).attr('userId')).addClass('disabled');\n\n                    if($('#user'+$(this).attr('userId')).hasClass('to-validate')) {\n                        $('.validation-users #user'+$(this).attr('userId')).remove();\n                        $('.userList #user'+$(this).attr('userId')).removeClass('to-validate');\n                    }\n\n                    if($('#user'+$(this).attr('userId')).hasClass('waiting-first-connexion')) {\n                        $('.first-connexion #user'+$(this).attr('userId')).remove();\n                        $('.userList #user'+$(this).attr('userId')).removeClass('waiting-first-connexion');\n                    }\n\n                    if($('#user'+$(this).attr('userId')).hasClass('active')) {\n                        $('.enabled #user'+$(this).attr('userId')).remove();\n                        $('.userList #user'+$(this).attr('userId')).removeClass('active');\n                    }\n\n                    if($('.validation-users .flex .userBlock').length <= 0) {\n                        $('.validation-users').remove();\n                    }\n\n                    $('#modal-generic').modal('hide');\n                    removeLoader();\n\n                } else {\n                    removeLoader();\n                    swal(data.msg);\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n\n            }\n        });\n    });\n\n    // ----------------------------------------------------------------------\n    // ----------------- Affiche la POPIN AJOUTER un PROFIL -----------------\n    // ----------------------------------------------------------------------\n    $('.add-account').off('click').on('click', function(e) {\n        e.preventDefault();\n        $('#modal-edit-account .modal-body').html('');\n        $('#modal-edit-account h4').html('Demande de création d\\'un compte utilisateur');\n        $('#newMembre form').clone().prependTo('#modal-edit-account .modal-body');\n        $('.userRolesContent').clone().insertBefore('#modal-edit-account .modal-body form input[type=\"submit\"]');\n        $('<h4>Informations personnelles</h4>').prependTo('#modal-edit-account .modal-body');\n\n\n        $('#modal-edit-account .modal-body .userRolesContent .focused input[type=\"checkbox\"], #modal-edit-account .modal-body .userRolesContent input[type=\"radio\"]').each(function(){\n            $(this).attr('name', $(this).attr('name').replace('-hidden-form', ''));\n            $(this).attr('id', $(this).attr('id').replace('-hidden-form', ''));\n        });\n\n        checkRoles();\n\n        new window.JustValidate('#modal-edit-account .modal-body form.newMembre', {\n            Rules: {\n                email: {\n                    required: true,\n                    email: true\n                },\n                text: {\n                    required: true,\n                    maxLength: 300,\n                },\n                phone: {\n                    required: true,\n                    phone: true,\n                    maxLength: 10,\n                    minLength: 10\n                }\n            },\n        });\n\n        // Visibilité des rapports envoyés à d'autres collaborateurs\n        $('#modal-edit-account input.visibiliteRapport').change( function() {\n            $('#visibilite-rapport').prop('checked', true);\n            $('#check-profil-labo').prop('checked', true);\n            if($(this).val() == \"other-rapport\") {\n\n                if($(this).prop('checked') == true){\n                    $(this).parent().children('label').after('<div class=\"add-email-row\">+</div>');\n                    $(this).parent().append('' +\n                        '<div class=\"email-row\"><input type=\"text\" name=\"email-collabo[]\" placeholder=\"Adresse email\"><button class=\"remove-email-row\">-</button></div>'\n                    );\n                    $('#modal-edit-account .add-email-row + .email-row input').focus();\n                    $(document).off('click').on('click', '.add-email-row', function(){\n                        $('.add-email-row').after(\n                            '<div class=\"email-row\"><input type=\"text\" name=\"email-collabo[]\" placeholder=\"Adresse email\"><button class=\"remove-email-row\">-</button></div>'\n                        );\n                        $('#modal-edit-account .add-email-row + .email-row input').focus();\n                    });\n                    $(document).on('click', '.remove-email-row', function(){\n                        $(this).parent().remove();\n                    });\n                } else {\n                    $('.email-row').remove();\n                    $('.add-email-row').remove();\n                }\n            }\n        });\n\n        $('#modal-edit-account').modal();\n\n        $('#modal-edit-account form.newMembre').off('submit').on('submit', function(e) {\n            e.preventDefault();\n\n            addLoader();\n\n            if($('#modal-edit-account .newMembre .userRolesContent input:checked').length >= 1 && $('.js-validate-error-label').length == 0) {\n\n                var data = new FormData();\n\n                // Add content to form array\n                $.each($(this).find('input'), function () {\n                    if ($(this).attr('type') != 'checkbox') {\n                        data.append($(this).attr('name'), $(this).val());\n                    } else {\n                        if ($(this).is(':checked')) {\n                            data.append($(this).attr('name'), true);\n                        }\n                    }\n                });\n\n                $.ajax({\n                    url: '/mon-compte/gestion-des-comptes/add-membre',\n                    type: 'POST',\n                    data: data,\n                    cache: false,\n                    dataType: 'json',\n                    context: this,\n                    processData: false, // Don't process the files\n                    //contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                    contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                    success: function (data, textStatus, jqXHR) {\n                        if(!data.error){\n                            removeLoader();\n\n                            $('#modal-edit-account').modal('hide');\n                            $('#modal-confirm-add-account p .firstname').text($('#modal-edit-account #newCompte input[name=\"FirstName\"]').val());\n                            $('#modal-confirm-add-account p .lastname').text($('#modal-edit-account #newCompte input[name=\"LastName\"]').val());\n                            $('#modal-confirm-add-account').modal('show');\n\n                            setTimeout(\n                                function()\n                                {\n                                    document.location.reload()\n                                }, 10000);\n                        } else {\n                            swal(\"\", data.msg, \"error\");\n                            removeLoader();\n                        }\n                    },\n                    error: function (jqXHR, textStatus, errorThrown) {\n                        removeLoader();\n                        swal(\"\", textStatus, \"error\");\n                    }\n                });\n            }\n            else if($('#modal-edit-account .newMembre .userRolesContent input:checked').length == 0) {\n                removeLoader();\n                swal(\"\", 'Veuillez sélectionner au moins un type de profil.', \"error\");\n            }\n            else if($('.js-validate-error-label').length >= 1) {\n                removeLoader();\n                swal(\"\", 'Veuillez renseigner tous les champs', \"error\");\n            }\n        });\n    });\n\n    // ------------------------------------------------------\n    // ----------------- ???? -----------------\n    // ------------------------------------------------------\n    $(document).ready(function(){\n        $('.accountDesactivationModal').off('click').on('click', function(e) {\n            $('#modal-generic .modal-body').html('');\n            $('#modal-generic .modal-title').text('Désactivation du compte');\n            $('#modal-generic .modal-body').html($('.content-modal-disable-account').html());\n            $('#modal-generic .accountDesactivation').attr('userId',$(this).attr('userId'));\n            $('#modal-generic').modal();\n        });\n    });\n\n    $('#modal-edit-account').on('hidden.bs.modal', function () {\n        modificationTypeButton = 'modifier';\n    });\n\n    // ---------------------------------------------------------------------------------------\n    // ----------------- Coche les roles suivants la rubrique de role cochée -----------------\n    // ---------------------------------------------------------------------------------------\n    function checkRoles() {\n        $('#check-profil-labo').on('change', function(){\n            if($(this).prop('checked')) {\n                $('#check-suivi-commandes').prop('checked', true);\n                $('#diag_suivi_cmd_mat').prop('checked', true);\n                $('#diag_suivi_cmd_fltr').prop('checked', true);\n                $('#diag_suivi_cmd_legio').prop('checked', true);\n                $('#visibilite-rapport').prop('checked', true);\n                $('#propre-rapport').prop('checked', true);\n                $('#planification').prop('checked', false);\n                $('#diag_cmd_conso').prop('checked', true);\n            }\n            else {\n                $('#check-suivi-commandes').prop('checked', false);\n                $('#diag_suivi_cmd_mat').prop('checked', false);\n                $('#diag_suivi_cmd_fltr').prop('checked', false);\n                $('#diag_suivi_cmd_legio').prop('checked', false);\n                $('#visibilite-rapport').prop('checked', false);\n                $('#propre-rapport').prop('checked', false);\n                $('#planification').prop('checked', false);\n                $('#diag_cmd_conso').prop('checked', false);\n            }\n        });\n\n        $('#check-suivi-commandes').on('change', function(){\n            if($(this).prop('checked')) {\n                $('#diag_suivi_cmd_mat').prop('checked', true);\n                $('#diag_suivi_cmd_fltr').prop('checked', true);\n                $('#diag_suivi_cmd_legio').prop('checked', true);\n            }\n            else {\n                $('#diag_suivi_cmd_mat').prop('checked', false);\n                $('#diag_suivi_cmd_fltr').prop('checked', false);\n                $('#diag_suivi_cmd_legio').prop('checked', false);\n            }\n        });\n\n        $('#visibilite-rapport').on('change', function(){\n            if($(this).prop('checked')) {\n                $('#propre-rapport').prop('checked', true);\n            }\n            else {\n                $('#propre-rapport').prop('checked', false);\n                $('#all-rapport').prop('checked', false);\n                $('#other-rapport').prop('checked', false);\n                $('.email-row').remove();\n                $('.add-email-row').remove();\n            }\n        });\n\n        $('#diag_admin_delegate').on('change', function(){\n            if($(this).prop('checked')) {\n                $('#programme-fidelite').prop('checked', true);\n                $('#check-profil-labo').prop('checked', true);\n                $('#check-suivi-commandes').prop('checked', true);\n                $('#diag_suivi_cmd_mat').prop('checked', true);\n                $('#diag_suivi_cmd_fltr').prop('checked', true);\n                $('#diag_suivi_cmd_legio').prop('checked', true);\n                $('#diag_cmd_conso').prop('checked', true);\n                $('#visibilite-rapport').prop('checked', true);\n                $('#all-rapport').prop('checked', true);\n                $('#planification').prop('checked', true);\n                $('#diag_stagiaire').prop('checked', true);\n                $('#diag_facturation').prop('checked', true);\n            }\n            else {\n                $('#programme-fidelite').prop('checked', false);\n                $('#check-profil-labo').prop('checked', false);\n                $('#check-suivi-commandes').prop('checked', false);\n                $('#diag_suivi_cmd_mat').prop('checked', false);\n                $('#diag_suivi_cmd_fltr').prop('checked', false);\n                $('#diag_suivi_cmd_legio').prop('checked', false);\n                $('#diag_cmd_conso').prop('checked', false);\n                $('#visibilite-rapport').prop('checked', false);\n                $('#all-rapport').prop('checked', false);\n                $('#planification').prop('checked', false);\n                $('#diag_stagiaire').prop('checked', false);\n                $('#diag_facturation').prop('checked', false);\n            }\n        });\n\n        $('.profil-labo .sub-role input[type=checkbox]').on('change', function() {\n            if($('.profil-labo .sub-role input[type=checkbox]:checked').length >= 1) {\n                $('#check-profil-labo').prop('checked', true);\n            }\n            else {\n                $('#check-profil-labo').prop('checked', false);\n            }\n        });\n\n        $('.profil-admin .sub-role input[type=checkbox]').on('change', function() {\n            if($('.profil-admin .sub-role input[type=checkbox]:checked').length >= 1) {\n                $('#diag_admin_delegate').prop('checked', true);\n            }\n            else {\n                $('#diag_admin_delegate').prop('checked', false);\n            }\n        });\n\n        $('.suivi-commandes .sub-role input[type=checkbox]').on('change', function() {\n            if($('.suivi-commandes .sub-role input[type=checkbox]:checked').length >= 1) {\n                $('#check-suivi-commandes').prop('checked', true);\n            }\n            else {\n                $('#check-suivi-commandes').prop('checked', false);\n                if($('.profil-labo .sub-role input[type=checkbox]:checked').length >= 1) {\n                    $('#check-profil-labo').prop('checked', true);\n                }\n                else {\n                    $('#check-profil-labo').prop('checked', false);\n                }\n            }\n        });\n\n        // Vérification à l'ouverture de la pop-in\n        if($('.profil-labo .sub-role input[type=checkbox]:checked').length >= 1) {\n            $('#check-profil-labo').prop('checked', true);\n        }\n        else {\n            $('#check-profil-labo').prop('checked', false);\n        }\n\n        if($('.suivi-commandes .sub-role input[type=checkbox]:checked').length >= 1) {\n            $('#check-suivi-commandes').prop('checked', true);\n        }\n        else {\n            $('#check-suivi-commandes').prop('checked', false);\n            if($('.profil-labo .sub-role input[type=checkbox]:checked').length >= 1) {\n                $('#check-profil-labo').prop('checked', true);\n            }\n            else {\n                $('#check-profil-labo').prop('checked', false);\n            }\n        }\n    }\n\n    // ----------------------------------------------------------------------------------------------------------------\n    // ----------------- Affiche les champs emails et gere les events pour la visiblité des rapports  -----------------\n    // ----------------------------------------------------------------------------------------------------------------\n    function setVisibiliteRapport(){\n        // Visibilité des rapports envoyés à d'autres collaborateurs\n        $('#modal-edit-account input.visibiliteRapport').change( function() {\n            $('#visibilite-rapport').prop('checked', true);\n            $('#check-profil-labo').prop('checked', true);\n            if($(this).val() == \"other-rapport\") {\n\n                if($(this).prop('checked') == true){\n                    $(this).parent().children('label').after('<div class=\"add-email-row\">+</div>');\n                    $(this).parent().append('' +\n                        '<div class=\"email-row\"><input type=\"text\" name=\"email-collabo[]\" placeholder=\"Adresse email\"><button class=\"remove-email-row\">-</button></div>'\n                    );\n                    $('#modal-edit-account .add-email-row + .email-row input').focus();\n                    $(document).off('click').on('click', '.add-email-row', function(){\n                        $('.add-email-row').after(\n                            '<div class=\"email-row\"><input type=\"text\" name=\"email-collabo[]\" placeholder=\"Adresse email\"><button class=\"remove-email-row\">-</button></div>'\n                        );\n                        $('#modal-edit-account .add-email-row + .email-row input').focus();\n                    });\n                    $(document).on('click', '.remove-email-row', function(){\n                        $(this).parent().remove();\n                    });\n                } else {\n                    $('.email-row').remove();\n                    $('.add-email-row').remove();\n                }\n            }\n        });\n    }\n});\n\n","jQuery(function ($) {\n\n\n    $('form#premiereconnexion').off('submit').on('submit', function(e) {\n        e.preventDefault();\n\n        addLoader();\n\n        $.ajax({\n            url: '/premiere-connexion/ajax',\n            type: 'POST',\n            data: jQuery.param({email: $(this).find('input[name=email]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                removeLoader();\n                genericModal('Première connexion', data.msg+'<div style=\"margin-top:20px;\"><a class=\"btn btn-default\" href=\"/signin\">Se connecter</a></div>');\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                removeLoader();\n                genericModal('Première connexion', data.textStatus);\n            }\n        });\n    });\n\n    $('form#premiereconnexionfinalise').off('submit').on('submit', function(e) {\n        e.preventDefault();\n\n        addLoader();\n\n        // checkpass\n        if($(this).find('input[name=password]').val() != $(this).find('input[name=password-confirm]').val()){\n            alert('Le mot de passe ne correspond pas à sa confirmation');\n            $(this).find('.loader-wrapper').remove();\n        } else {\n            $.ajax({\n                url: document.location.pathname + '/ajax',\n                type: 'POST',\n                data: jQuery.param({password: $(this).find('input[name=password]').val(), passwordConfirm: $(this).find('input[name=password-confirm]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n                cache: false,\n                dataType: 'json',\n                context: this,\n                processData: false, // Don't process the files\n                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n                success: function (data, textStatus, jqXHR) {\n                    removeLoader();\n\n                    if (!data.error) {\n                        document.location.href = '/';\n                    } else {\n                        alert(data.msg);\n                    }\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    removeLoader();\n                    alert(textStatus);\n                }\n            });\n        }\n    });\n});","jQuery(function ($) {\n\n    // Modal demander un accès\n    $('.request-account').off('click').on('click', function(e) {\n      e.preventDefault();\n      $('#modal-request-account').modal();\n    });\n\n\n    $('form#signin').off('submit').on('submit', function(e) {\n        e.preventDefault();\n\n        addLoader();\n\n        $.ajax({\n            url: '/signin/ajax',\n            type: 'POST',\n            data: jQuery.param({email: $(this).find('input[name=email]').val(), 'password' : $(this).find('input[name=password]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n           // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                removeLoader();\n                if(!data.error){\n                    document.location.href = '/';\n                } else {\n                    swal(\"\", data.msg, \"error\");\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                removeLoader();\n                swal(\"\", textStatus, \"error\");\n            }\n        });\n    });\n\n    $('.dejaClientItga').off('click').on('click', function(e) {\n        $('#dejaClient').removeClass('hidden');\n        $('.modal-body ul').addClass('hidden');\n    });\n\n    $('#modal-request-account button.close').click(function(e) {\n        $('#dejaClient').addClass('hidden');\n        $('.modal-body ul').removeClass('hidden');\n    });\n\n    $('#dejaClient').off('submit').on('submit', function(e) {\n        e.preventDefault();\n\n        addLoader();\n\n        $.ajax({\n            url: '/signin/deja-client/ajax',\n            type: 'POST',\n            data: jQuery.param({numero: $(this).find('input[name=numero]').val()}),//'email='+$(this).find('input[name=email]').val()+'&password='+$(this).find('input[name=password]').val(),\n            cache: false,\n            dataType: 'json',\n            context: this,\n            processData: false, // Don't process the files\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n            // contentType: false, // Set content type to false as jQuery will tell the server its a query string request\n            success: function(data, textStatus, jqXHR) {\n                removeLoader();\n                if(!data.error){\n                    document.location.href = '/form/deja-client-itga?key=' + $(this).find('input[name=numero]').val();\n                } else {\n                    $('.errorMsgDejaClient').remove();\n                    $('#dejaClient input[type=submit]').after('<div class=\"errorMsgDejaClient\">' + data.msg + '</div>');\n                }\n            },\n            error: function(jqXHR, textStatus, errorThrown) {\n                removeLoader();\n                swal(\"\", textStatus, \"error\");\n            }\n        });\n    });\n\n\n    $('#webform-submission-deja-client-itga-add-form #edit-numero-de-compte-client-itga').attr('value', getUrlParameter('key'));\n\n    $('#modal-request-account input[type=\"text\"]').on('input',function(e){\n        if($(this).val().length > 0) {\n            $('#modal-request-account input[type=\"submit\"]').prop('disabled', false);\n        }\n        if($(this).val().length == 0) {\n            $('#modal-request-account input[type=\"submit\"]').prop('disabled', true);\n        }\n    });\n\n    $('#modal-request-account input[type=\"submit\"]').click(function(e){\n        if($('#modal-request-account input[type=\"text\"]').val().length == 0) {\n            e.preventDefault();\n            e.stopPropagation();\n            $('#modal-request-account .error').show();\n        }\n\n    });\n\n});\n\n\nfunction getUrlParameter(name) {\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n    var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n    var results = regex.exec(location.search);\n    return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};"]}